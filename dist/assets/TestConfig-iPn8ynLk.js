import{u as re,r as c,M as g,j as e}from"./index-C6eRHT7T.js";import{useNavigate as ae}from"react-router-dom";import{Container as ie,Typography as i,Paper as f,Box as l,Chip as B,Tabs as ne,Tab as le,Button as h,CircularProgress as oe,Alert as ce,Snackbar as de,Dialog as ue,DialogTitle as me,DialogContent as he,Slider as m,FormGroup as xe,FormControlLabel as D,Switch as I,TextField as pe,DialogActions as ge,ListItem as A,ListItemIcon as $,Checkbox as w,ListItemText as M,Divider as fe,List as je,ListItemButton as ye}from"@mui/material";import be from"@mui/icons-material/Settings";import Ce from"@mui/icons-material/CheckCircleOutline";import"@mui/icons-material/HighlightOff";import ve from"@mui/icons-material/PlayArrow";import{S as Se}from"./SeverityChip-Ddfmp31a.js";import"@mui/material/Box";import"@mui/icons-material/Menu";import"@mui/icons-material/Notifications";import"@mui/icons-material/HelpOutline";import"@mui/icons-material/AccountCircle";import"@mui/icons-material/DarkMode";import"@mui/icons-material/Home";import"@mui/icons-material/CheckBox";import"@mui/icons-material/Assessment";import"@mui/icons-material/Info";import"@mui/material/styles";import"@mui/material/CssBaseline";import"@mui/icons-material/Warning";import"@mui/icons-material/PriorityHigh";import"@mui/icons-material/CheckCircle";const qe=()=>{const O=ae(),{selectedTests:S,saveTestConfiguration:R,testParameters:_,updateTestParameter:o,modelType:N,modelCategory:j}=re(),[y,T]=c.useState(0),[d,p]=c.useState([]),[k,E]=c.useState({}),[W,b]=c.useState(!1),[a,C]=c.useState(null),[z,G]=c.useState(!1),[v,L]=c.useState(!1),[V,P]=c.useState(!1),x=Object.keys(g);c.useEffect(()=>{p(S||[])},[S]),c.useEffect(()=>{const s={};x.forEach(t=>{const r=g[t].map(u=>u.id),n=r.filter(u=>d.includes(u));s[t]=n.length===r.length}),E(s)},[d,x]);const H=(s,t)=>{T(t)},K=s=>{p(t=>t.includes(s)?t.filter(r=>r!==s):[...t,s])},q=s=>{const t=g[s].map(r=>r.id);p(r=>k[s]?r.filter(n=>!t.includes(n)):[...r.filter(u=>!t.includes(u)),...t])},J=s=>{C(s),b(!0)},F=()=>{b(!1),C(null)},Q=()=>{b(!1),C(null)},U=()=>{L(!0),setTimeout(()=>{R(d),G(!0),P(!0),L(!1)},1e3)},X=()=>{P(!1)},Y=()=>{O("/run-tests")},Z=()=>{if(!a)return null;const s=_[a.id]||{};return e.jsxs(ue,{open:W,onClose:F,fullWidth:!0,maxWidth:"sm",children:[e.jsxs(me,{children:["Configure Test: ",a.name]}),e.jsxs(he,{dividers:!0,children:[e.jsx(i,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:a.description}),e.jsxs(l,{sx:{mt:3},children:[a.id.includes("tech_safety")&&e.jsxs(e.Fragment,{children:[a.id==="tech_safety_1"&&e.jsxs(l,{children:[e.jsxs(i,{id:"success-rate-slider",gutterBottom:!0,children:["Minimum Success Rate: ",(s.min_success_rate||.8)*100,"%"]}),e.jsx(m,{"aria-labelledby":"success-rate-slider",value:s.min_success_rate||.8,onChange:(t,r)=>o(a.id,{min_success_rate:r}),step:.05,marks:!0,min:0,max:1,valueLabelDisplay:"auto",valueLabelFormat:t=>`${t*100}%`})]}),a.id==="tech_safety_2"&&e.jsxs(e.Fragment,{children:[e.jsxs(i,{id:"stability-slider",gutterBottom:!0,children:["Stability Threshold: ",(s.stability_threshold||.8)*100,"%"]}),e.jsx(m,{"aria-labelledby":"stability-slider",value:s.stability_threshold||.8,onChange:(t,r)=>o(a.id,{stability_threshold:r}),step:.05,marks:!0,min:0,max:1,valueLabelDisplay:"auto",valueLabelFormat:t=>`${t*100}%`}),e.jsxs(i,{id:"consistency-slider",gutterBottom:!0,sx:{mt:3},children:["Consistency Threshold: ",(s.consistency_threshold||.7)*100,"%"]}),e.jsx(m,{"aria-labelledby":"consistency-slider",value:s.consistency_threshold||.7,onChange:(t,r)=>o(a.id,{consistency_threshold:r}),step:.05,marks:!0,min:0,max:1,valueLabelDisplay:"auto",valueLabelFormat:t=>`${t*100}%`})]}),a.id==="tech_safety_3"&&e.jsxs(l,{children:[e.jsxs(i,{id:"recovery-slider",gutterBottom:!0,children:["Minimum Recovery Score: ",(s.min_recovery_score||.7)*100,"%"]}),e.jsx(m,{"aria-labelledby":"recovery-slider",value:s.min_recovery_score||.7,onChange:(t,r)=>o(a.id,{min_recovery_score:r}),step:.05,marks:!0,min:0,max:1,valueLabelDisplay:"auto",valueLabelFormat:t=>`${t*100}%`})]}),a.id==="tech_safety_4"&&e.jsxs(l,{children:[e.jsxs(i,{id:"performance-slider",gutterBottom:!0,children:["Minimum Performance Score: ",(s.min_performance_score||.7)*100,"%"]}),e.jsx(m,{"aria-labelledby":"performance-slider",value:s.min_performance_score||.7,onChange:(t,r)=>o(a.id,{min_performance_score:r}),step:.05,marks:!0,min:0,max:1,valueLabelDisplay:"auto",valueLabelFormat:t=>`${t*100}%`})]})]}),a.id.includes("fairness")&&e.jsxs(e.Fragment,{children:[a.id==="fairness_1"&&e.jsxs(l,{children:[e.jsxs(i,{id:"min-accuracy-slider",gutterBottom:!0,children:["Minimum Group Accuracy: ",(s.min_accuracy||.7)*100,"%"]}),e.jsx(m,{"aria-labelledby":"min-accuracy-slider",value:s.min_accuracy||.7,onChange:(t,r)=>o(a.id,{min_accuracy:r}),step:.05,marks:!0,min:0,max:1,valueLabelDisplay:"auto",valueLabelFormat:t=>`${t*100}%`})]}),a.id==="fairness_2"&&e.jsxs(l,{children:[e.jsxs(i,{id:"min-ratio-slider",gutterBottom:!0,children:["Minimum Fairness Ratio: ",s.min_ratio||.8]}),e.jsx(m,{"aria-labelledby":"min-ratio-slider",value:s.min_ratio||.8,onChange:(t,r)=>o(a.id,{min_ratio:r}),step:.05,marks:!0,min:.4,max:1,valueLabelDisplay:"auto"})]})]}),e.jsxs(xe,{sx:{mt:3},children:[e.jsx(D,{control:e.jsx(I,{checked:s.verbose||!1,onChange:t=>o(a.id,{verbose:t.target.checked})}),label:"Verbose Logging"}),e.jsx(D,{control:e.jsx(I,{checked:s.stop_on_failure||!1,onChange:t=>o(a.id,{stop_on_failure:t.target.checked})}),label:"Stop on Failure"})]}),e.jsx(pe,{margin:"normal",fullWidth:!0,multiline:!0,rows:3,label:"Additional Notes",value:s.notes||"",onChange:t=>o(a.id,{notes:t.target.value})})]})]}),e.jsxs(ge,{children:[e.jsx(h,{onClick:F,children:"Cancel"}),e.jsx(h,{onClick:Q,variant:"contained",color:"primary",children:"Save Parameters"})]})]})},ee=s=>{const t=g[s]||[],r=s==="NLP-Specific"&&!["NLP","Multimodal"].includes(j)?[]:t;return r.length===0?e.jsx(f,{variant:"outlined",sx:{mt:2,p:3,textAlign:"center"},children:e.jsx(i,{variant:"body1",color:"textSecondary",children:"No applicable tests for this model type in this category."})}):e.jsxs(f,{variant:"outlined",sx:{mt:2},children:[e.jsxs(A,{children:[e.jsx($,{children:e.jsx(w,{edge:"start",checked:k[s]||!1,onChange:()=>q(s),inputProps:{"aria-label":`Select all ${s} tests`}})}),e.jsx(M,{primary:e.jsx(i,{variant:"subtitle1",children:"Select All"})}),e.jsxs(i,{variant:"body2",color:"textSecondary",children:[r.length," tests available"]})]}),e.jsx(fe,{}),e.jsx(je,{children:r.map(n=>{const u=d.includes(n.id),se=_[n.id];return e.jsx(A,{secondaryAction:e.jsx(h,{variant:"outlined",size:"small",onClick:()=>J(n),startIcon:e.jsx(be,{}),children:"Configure"}),disablePadding:!0,children:e.jsxs(ye,{onClick:()=>K(n.id),dense:!0,sx:{pr:7},children:[e.jsx($,{children:e.jsx(w,{edge:"start",checked:u,inputProps:{"aria-label":`Select ${n.name}`}})}),e.jsx(M,{primary:e.jsxs(l,{sx:{display:"flex",alignItems:"center"},children:[n.name,se&&e.jsx(B,{label:"Configured",size:"small",color:"primary",variant:"outlined",sx:{ml:1}})]}),secondary:n.description}),e.jsx(Se,{severity:n.severity,sx:{ml:1}})]})},n.id)})})]})},te=()=>j==="NLP"?["Technical Safety","NLP-Specific","Fairness & Bias"]:j==="Vision"?["Technical Safety","Fairness & Bias","Privacy Protection"]:["Technical Safety","Regulatory Compliance"];return e.jsxs(ie,{maxWidth:"lg",children:[e.jsx(i,{variant:"h4",gutterBottom:!0,children:"Test Configuration"}),e.jsxs(f,{sx:{p:3,mb:3},children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Recommended Tests"}),e.jsxs(i,{variant:"body2",color:"textSecondary",paragraph:!0,children:["Based on your model type (",N,") and configuration, we recommend the following test categories:"]}),e.jsx(l,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:te().map(s=>e.jsx(B,{label:s,onClick:()=>{const t=x.indexOf(s);t!==-1&&T(t)},sx:{cursor:"pointer"}},s))})]}),e.jsxs(f,{sx:{p:3,mb:3},children:[e.jsx(l,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:e.jsx(ne,{value:y,onChange:H,variant:"scrollable",scrollButtons:"auto",children:x.map((s,t)=>e.jsx(le,{label:s,id:`test-tab-${t}`,"aria-controls":`test-tabpanel-${t}`},s))})}),x.map((s,t)=>e.jsx(l,{role:"tabpanel",hidden:y!==t,id:`test-tabpanel-${t}`,"aria-labelledby":`test-tab-${t}`,children:y===t&&ee(s)},s))]}),e.jsxs(l,{sx:{mt:4,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(i,{children:[e.jsx("strong",{children:d.length})," tests selected"]}),e.jsxs(l,{sx:{display:"flex",gap:2},children:[e.jsx(h,{variant:"outlined",onClick:()=>p([]),disabled:d.length===0||v,children:"Clear Selection"}),e.jsx(h,{variant:"contained",color:"primary",onClick:U,disabled:d.length===0||v,startIcon:v?e.jsx(oe,{size:20}):e.jsx(Ce,{}),children:"Save Configuration"})]})]}),z&&e.jsxs(l,{sx:{mt:3},children:[e.jsx(ce,{severity:"success",sx:{mb:2},children:"Test configuration saved successfully!"}),e.jsx(l,{sx:{display:"flex",justifyContent:"center"},children:e.jsx(h,{variant:"contained",color:"primary",startIcon:e.jsx(ve,{}),onClick:Y,children:"Proceed to Run Tests"})})]}),Z(),e.jsx(de,{open:V,autoHideDuration:6e3,onClose:X,message:"Test configuration saved successfully!"})]})};export{qe as default};
//# sourceMappingURL=TestConfig-iPn8ynLk.js.map
